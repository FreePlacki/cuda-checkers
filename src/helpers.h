#ifndef HELPERS_H
#define HELPERS_H

#include <stdio.h>

#define dbg(x) ({ __typeof__(x) _v = (x); fprintf(stderr, "%s:%d: %s = %lld\n", \
    __FILE__, __LINE__, #x, (long long)_v); _v; })


#define U32_BIN_FMT "%c%c%c%c %c%c%c%c %c%c%c%c %c%c%c%c %c%c%c%c %c%c%c%c %c%c%c%c %c%c%c%c"
#define U32_BIN_VAL(x) \
  ( (x) & 0x80000000 ? '1' : '0'), ( (x) & 0x40000000 ? '1' : '0'), \
  ( (x) & 0x20000000 ? '1' : '0'), ( (x) & 0x10000000 ? '1' : '0'), \
  ( (x) & 0x08000000 ? '1' : '0'), ( (x) & 0x04000000 ? '1' : '0'), \
  ( (x) & 0x02000000 ? '1' : '0'), ( (x) & 0x01000000 ? '1' : '0'), \
  ( (x) & 0x00800000 ? '1' : '0'), ( (x) & 0x00400000 ? '1' : '0'), \
  ( (x) & 0x00200000 ? '1' : '0'), ( (x) & 0x00100000 ? '1' : '0'), \
  ( (x) & 0x00080000 ? '1' : '0'), ( (x) & 0x00040000 ? '1' : '0'), \
  ( (x) & 0x00020000 ? '1' : '0'), ( (x) & 0x00010000 ? '1' : '0'), \
  ( (x) & 0x00008000 ? '1' : '0'), ( (x) & 0x00004000 ? '1' : '0'), \
  ( (x) & 0x00002000 ? '1' : '0'), ( (x) & 0x00001000 ? '1' : '0'), \
  ( (x) & 0x00000800 ? '1' : '0'), ( (x) & 0x00000400 ? '1' : '0'), \
  ( (x) & 0x00000200 ? '1' : '0'), ( (x) & 0x00000100 ? '1' : '0'), \
  ( (x) & 0x00000080 ? '1' : '0'), ( (x) & 0x00000040 ? '1' : '0'), \
  ( (x) & 0x00000020 ? '1' : '0'), ( (x) & 0x00000010 ? '1' : '0'), \
  ( (x) & 0x00000008 ? '1' : '0'), ( (x) & 0x00000004 ? '1' : '0'), \
  ( (x) & 0x00000002 ? '1' : '0'), ( (x) & 0x00000001 ? '1' : '0')

#define dbg_b(x) \
    printf(U32_BIN_FMT "\n", U32_BIN_VAL((uint32_t)(x)))

#endif /* HELPERS_H */
